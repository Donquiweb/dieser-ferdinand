<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Test Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" id="MetaViewport" data-detect-viewport-is-scaled="false"/>

  <!-- Step 1: oil stub (command collection == this makes the loading of a CMP (oil.js is one example of a CMP, Consent Management Provicer) independent from any call by vendors) -->
  <!-- @formatter:off-->
  <script type="text/javascript">
    /*! 1.2.1-RELEASE */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="//oil.axelspringer.com/release/1.2.1/",n(n.s=115)}({115:function(e,t,n){"use strict";!function(e,t){e.__cmp||(e.__cmp=function(){function n(){return!(!e.AS_OIL||!e.AS_OIL.commandCollectionExecutor)}(e.attachEvent||e.addEventListener)("message",function(t){e.__cmp.receiveMessage(t)},!1),function e(){if(!(t.getElementsByName("__cmpLocator").length>0))if(t.body){var n=t.createElement("iframe");n.style.display="none",n.name="__cmpLocator",t.body.appendChild(n)}else setTimeout(e,5)}();var r=[],o=function(o,a,c){if("ping"===o)!function(e){if(e){var r=!0,o=t.querySelector('script[type="application/configuration"]#oil-configuration');if(null!==o&&o.text)try{var a=JSON.parse(o.text);a&&a.hasOwnProperty("gdpr_applies_globally")&&(r=a.gdpr_applies_globally)}catch(e){}e({gdprAppliesGlobally:r,cmpLoaded:n()},!0)}}(c);else{var l={command:o,parameter:a,callback:c};r.push(l),n()&&e.AS_OIL.commandCollectionExecutor(l)}};return o.commandCollection=r,o.receiveMessage=function(e){var t=e&&e.data&&e.data.__cmpCall;t&&r.push({callId:t.callId,command:t.command,parameter:t.parameter,event:e})},o}())}(window,document)}});
  </script>
  <!-- @formatter:on-->

  <!-- Step 2: oil config (directly setting the configuration, you can also use another stlye - https://oil.axelspringer.com/docs/#the-configuration-block ) -->
  <script>
    (function () {
        if (!window.AS_OIL) {
          window.AS_OIL = {};
          window.AS_OIL.CONFIG = {
            "advanced_settings": true,// Enable Cookie Preference Center
            "timeout": -1,            // Do not autohide the layer after 60s
            "preview_mode": true,     // Only shows the layer if the user has also the preview mode cookie
            "default_to_optin": true  // Without user interaction the consent is "true"
            // publicPath: "//cdn.welt.de/oil/1.2.2/" // This WOULD be the path where all the files from oil are stored and would be loaded - defaults to oil.axelspringer.com
          }
        }
      }()
    )
  </script>

  <!-- Step 3: oil.js tag (can be loaded async) -->
  <script type="text/javascript" src="//oil.axelspringer.com/release/1.2.1/oil.1.2.1-RELEASE.min.js"></script>


  <script>
    // Works only if oil.js is done loading
    (function () {
      window.AS_OIL.hasOptOut = function () {
        var status = window.AS_OIL.status();
        if (status && status.consentData && status.consentData.allowedPurposeIds) {
          // You normally check the purpose you would need as a vendor
          return status.consentData.allowedPurposeIds.length >= 5;
        }
        return false;
      }
    }())

    // Works with the stub and the IAB calls
    (function () {
      // Register callback
      __cmp('getVendorConsents', null, function (result) {
        if (result && result.purposeConsents) {
          var hasOptinToAllPurposes = result.purposeConsents["1"]
            && result.purposeConsents["2"]
            && result.purposeConsents["3"]
            && result.purposeConsents["4"]
            && result.purposeConsents["5"];
          // do something with the result
        }
      });
    }())
  </script>
  <!-- CUSTOM STYLE FOR UNIT-->
  <style>
    div.as-oil-content-overlay {
      background-color: #ffffff;
    }

    div.as-oil-l-wrapper-layout-max-width {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;
    }

    .small p.as-oil__intro-txt {
      margin: 12px;
      font-family: MarkOT, sans-serif;
      font-size: 14px;
      line-height: 1.5;
      font-weight: normal;
      font-style: normal;
      font-stretch: normal;
      letter-spacing: normal;
      color: #000000;
    }

    .small div.as-oil-l-row {
      margin: 1em 0;
    }

    div.as-oil-l-item {
      margin: 0;
      text-align: center;
    }

    button.as-oil__btn-optin {
      background-color: #f18825;
      width: 107px;
      height: 40px;
    }

    @media (max-width: 600px) {
      button.as-oil__btn-optin {
        width: 100%;
      }
    }

    button.as-oil__btn-optin:hover {
      background-color: white;
      color: #f18825;
      border: solid 1px #f18825;
    }
  </style>
</head>

<body>
<div class="demoname">WELT UK-Layer Example</div>
<div class="has-big-bad-background">
  <div class="interaction-container__wrapper">
    <div class="interaction-container">

      <p>Volle Dokumentation: <a href="https://oil.axelspringer.com/docs/" target="_blank">https://oil.axelspringer.com/docs/</a></p>

      <div>
        <p>JS-API</p>
        <button class="btn as-oil__btn-optin " onclick="window.AS_OIL.previewModeOn()">
          AS_OIL.previewModeOn() -> Show layer with configured preview mode
        </button>
        <button class="btn as-oil__btn-optin " onclick="window.AS_OIL.verboseModeOn()">
          AS_OIL.verboseModeOn() -> Enable logging
        </button>
      </div>


      <div>
        <p>Aktuelle config:</p>
        <pre id="config-pre"></pre>
      </div>

      <div>
        <p>Howto:</p>
        <ul>
          <li>Stub einbinden, direkt ins HTML</li>
          <li>Configuration einbinden</li>
          <li>oil.js tag einbinden (Achtung: Lädt Dateien für das UI nach, default von oil.axelspringer.com)</li>
          <li>Beim anschauen der Seite: Previe Mode im eigenen Browser aktivieren</li>
          <li>Status auslesen (AS_OIL.status())</li>
        </ul>
      </div>
    </div>
  </div>
</div>
</body>

<link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet">
<link href="simple-style.css" rel="stylesheet">
<script>
  (function () {
    var element = document.getElementById('config-pre');
    element.innerHTML = JSON.stringify(window.AS_OIL.CONFIG, null, 2);
  }())
</script>
</html>
